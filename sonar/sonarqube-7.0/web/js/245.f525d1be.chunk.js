webpackJsonp([245],{1873:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),c=n.n(s),i=n(6),l=n.n(i),u=n(24),p=n.n(u),m=n(5),d=(n.n(m),n(9)),h=n(1914),f=n(2094),b=n(2098),k=n(2099),g=n(2101),y=n(2106),E=n(1918),_=n(2010),v=n(2118),O=(n.n(v),n(135)),C=n(2),j=function(){function e(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(a=(s=c.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),N=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),S=c.a.createElement("div",{className:"page page-limited"},c.a.createElement("i",{className:"spinner"})),w=function(e){function t(){var e,n,o,s;a(this,t);for(var c=arguments.length,i=Array(c),l=0;l<c;l++)i[l]=arguments[l];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.state={loading:!0,tasks:[],query:"",pendingCount:0,failingCount:0},s=n,r(o,s)}return o(t,e),N(t,[{key:"componentWillMount",value:function(){this.loadTasksDebounced=Object(m.debounce)(this.loadTasks.bind(this),h.c)}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,Object(E.g)().then(function(t){e.setState({types:t}),e.loadTasks()})}},{key:"componentDidUpdate",value:function(e){e.component===this.props.component&&e.location===this.props.location||this.loadTasksDebounced()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"loadTasks",value:function(){var e=this;this.setState({loading:!0});var t=this.props.location.query.status||h.d.status,n=this.props.location.query.taskType||h.d.taskType,a=this.props.location.query.currents||h.d.currents,r=this.props.location.query.minSubmittedAt||h.d.minSubmittedAt,o=this.props.location.query.maxExecutedAt||h.d.maxExecutedAt,s=this.props.location.query.query||h.d.query,c={status:t,taskType:n,currents:a,minSubmittedAt:r,maxExecutedAt:o,query:s},i=Object(_.b)(c);this.props.component&&(i.componentId=this.props.component.id),Promise.all([Object(E.c)(i),Object(E.d)(i.componentId)]).then(function(t){if(e.mounted){var n=j(t,2),a=n[0],r=n[1],o=a.tasks,s=r.pending,c=r.failing,i=Object(m.uniq)(o.map(function(e){return e.organization}).filter(function(e){return e}));e.props.fetchOrganizations(i),e.setState({tasks:o,pendingCount:s,failingCount:c,loading:!1})}})}},{key:"handleFilterUpdate",value:function(e){var t=Object.assign({},this.props.location.query,e);Object.keys(h.d).forEach(function(e){t[e]===h.d[e]&&delete t[e]}),this.context.router.push({pathname:this.props.location.pathname,query:t})}},{key:"handleCancelTask",value:function(e){var t=this;this.setState({loading:!0}),Object(E.b)(e.id).then(function(e){if(t.mounted){var n=Object(_.c)(t.state.tasks,e);t.setState({tasks:n,loading:!1})}})}},{key:"handleFilterTask",value:function(e){this.handleFilterUpdate({query:e.componentKey})}},{key:"handleShowFailing",value:function(){this.handleFilterUpdate(Object.assign({},h.d,{status:h.e.FAILED,currents:h.b.ONLY_CURRENTS}))}},{key:"handleCancelAllPending",value:function(){var e=this;this.setState({loading:!0}),Object(E.a)().then(function(){e.mounted&&e.loadTasks()})}},{key:"render",value:function(){var e=this.props.component,t=this.state,n=t.loading,a=t.types,r=t.tasks,o=t.pendingCount,s=t.failingCount;if(!a)return S;var i=this.props.location.query.status||h.d.status,l=this.props.location.query.taskType||h.d.taskType,u=this.props.location.query.currents||h.d.currents,m=this.props.location.query.minSubmittedAt||"",d=this.props.location.query.maxExecutedAt||"",E=this.props.location.query.query||"";return c.a.createElement("div",{className:"page page-limited"},c.a.createElement(p.a,{title:Object(C.translate)("background_tasks.page")}),c.a.createElement(f.a,{component:e}),c.a.createElement(k.a,{component:e,pendingCount:o,failingCount:s,onShowFailing:this.handleShowFailing.bind(this),onCancelAllPending:this.handleCancelAllPending.bind(this)}),c.a.createElement(g.a,{loading:n,component:e,status:i,currents:u,minSubmittedAt:m,maxExecutedAt:d,query:E,taskType:l,types:a,onFilterUpdate:this.handleFilterUpdate.bind(this),onReload:this.loadTasksDebounced}),c.a.createElement(y.a,{loading:n,component:e,tasks:r,onCancelTask:this.handleCancelTask.bind(this),onFilterTask:this.handleFilterTask.bind(this)}),c.a.createElement(b.a,{tasks:r}))}}]),t}(c.a.PureComponent);w.contextTypes={router:l.a.object.isRequired};var x={fetchOrganizations:O.f};t.default=Object(d.connect)(null,x)(w)},1914:function(e,t,n){"use strict";n.d(t,"e",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"c",function(){return c});var a={ALL:"__ALL__",ALL_EXCEPT_PENDING:"__ALL_EXCEPT_PENDING__",PENDING:"PENDING",IN_PROGRESS:"IN_PROGRESS",SUCCESS:"SUCCESS",FAILED:"FAILED",CANCELED:"CANCELED"},r="ALL_TYPES",o={ALL:"__ALL__",ONLY_CURRENTS:"CURRENTS"},s={status:a.ALL_EXCEPT_PENDING,taskType:r,currents:o.ALL,minSubmittedAt:"",maxExecutedAt:"",query:""},c=250},1918:function(e,t,n){"use strict";function a(e){return Object(m.getJSON)("/api/ce/activity",e)}function r(e){var t={};return e&&Object.assign(t,{componentId:e}),Object(m.getJSON)("/api/ce/activity_status",t)}function o(e,t){return Object(m.getJSON)("/api/ce/task",{id:e,additionalFields:t}).then(function(e){return e.task})}function s(e){return Object(m.post)("/api/ce/cancel",{id:e}).then(function(){return o(e)},function(){return o(e)})}function c(){return Object(m.post)("/api/ce/cancel_all")}function i(e){return Object(m.getJSON)("/api/ce/component",{componentKey:e}).catch(d.a)}function l(){return Object(m.getJSON)("/api/ce/task_types").then(function(e){return e.taskTypes})}function u(){return Object(m.getJSON)("/api/ce/worker_count").catch(d.a)}function p(e){return Object(m.post)("/api/ce/set_worker_count",{count:e}).catch(d.a)}t.c=a,t.d=r,t.e=o,t.b=s,t.a=c,t.f=i,t.g=l,t.h=u,t.i=p;var m=n(14),d=n(31)},1928:function(e,t,n){"use strict";function a(e){var t=e.link,n=void 0===t||t,a=e.organization;return e.shouldBeDisplayed&&a?r.createElement("span",null,n?r.createElement(c.a,{className:e.linkClassName,organization:a},a.name):a.name,r.createElement("span",{className:"slash-separator"})):null}var r=n(0),o=(n.n(r),n(9)),s=n(10),c=n(583),i=function(e,t){return{organization:Object(s.getOrganizationByKey)(e,t.organizationKey),shouldBeDisplayed:Object(s.areThereCustomOrganizations)(e)}};t.a=Object(o.connect)(i)(a)},1978:function(e,t,n){"use strict";function a(e){var t=e.children,n=e.date,a=e.long;return r.createElement(o.d,c({value:Object(s.parseDate)(n)},a?l:i),t)}t.a=a;var r=n(0),o=(n.n(r),n(52)),s=n(45),c=this&&this.__assign||Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i={hour:"numeric",minute:"numeric"},l={hour:"numeric",minute:"numeric",second:"numeric"}},2010:function(e,t,n){"use strict";function a(e,t){return e.map(function(e){return e.id===t.id?t:e})}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return e.status===c.e.ALL?t.status=[c.e.PENDING,c.e.IN_PROGRESS,c.e.SUCCESS,c.e.FAILED,c.e.CANCELED].join():e.status===c.e.ALL_EXCEPT_PENDING?t.status=[c.e.IN_PROGRESS,c.e.SUCCESS,c.e.FAILED,c.e.CANCELED].join():t.status=e.status,e.taskType!==c.a&&(t.type=e.taskType),e.currents!==c.b.ALL&&(t.onlyCurrents=!0),e.minSubmittedAt&&(t.minSubmittedAt=e.minSubmittedAt),e.maxExecutedAt&&(t.maxExecutedAt=e.maxExecutedAt),e.query&&(t.componentQuery=e.query),1!==e.lastPage&&(t.p=e.lastPage),t}function o(e,t){return""+e+t}function s(e){if(!e)return"";if(e>=l){return o(Math.round(e/l),"min")}if(e>=i){return o(Math.round(e/i),"s")}return o(e,"ms")}t.c=a,t.b=r,t.a=s;var c=n(1914),i=1e3,l=60*i},2094:function(e,t,n){"use strict";function a(e){return r.createElement("header",{className:"page-header"},r.createElement("h1",{className:"page-title"},Object(s.translate)("background_tasks.page")),!e.component&&r.createElement("div",{className:"page-actions"},r.createElement(o.a,null)),r.createElement("p",{className:"page-description"},Object(s.translate)("background_tasks.page.description")))}t.a=a;var r=n(0),o=(n.n(r),n(2095)),s=n(2)},2095:function(e,t,n){"use strict";var a=n(0),r=(n.n(a),n(2096)),o=n(2097),s=n(20),c=(n.n(s),n(23)),i=n(1918),l=n(2),u=n(330),p=n(61),m=n(79),d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={canSetWorkerCount:!1,formOpen:!1,loading:!0,noSupportPopup:!1,workerCount:1},t.loadWorkers=function(){t.setState({loading:!0}),Object(i.h)().then(function(e){var n=e.canSetWorkerCount,a=e.value;t.mounted&&t.setState({canSetWorkerCount:n,loading:!1,workerCount:a})},function(){t.mounted&&t.setState({loading:!1})})},t.closeForm=function(e){return e?t.setState({formOpen:!1,workerCount:e}):t.setState({formOpen:!1})},t.handleChangeClick=function(){t.setState({formOpen:!0})},t.handleHelpClick=function(e){e.preventDefault(),e.stopPropagation(),t.toggleNoSupportPopup()},t.toggleNoSupportPopup=function(e){void 0!==e?t.setState({noSupportPopup:e}):t.setState(function(e){return{noSupportPopup:!e.noSupportPopup}})},t}return d(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.loadWorkers()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.state,t=e.canSetWorkerCount,n=e.formOpen,i=e.loading,d=e.workerCount;return a.createElement("div",null,!i&&d>1&&a.createElement(c.a,{overlay:Object(l.translate)("background_tasks.number_of_workers.warning")},a.createElement("i",{className:"icon-alert-warn little-spacer-right bt-workers-warning-icon"})),a.createElement("span",{className:"text-middle"},Object(l.translate)("background_tasks.number_of_workers"),i?a.createElement("i",{className:"spinner little-spacer-left"}):a.createElement("strong",{className:"little-spacer-left"},d)),!i&&t&&a.createElement(c.a,{overlay:Object(l.translate)("background_tasks.change_number_of_workers")},a.createElement(m.c,{className:"js-edit button-small spacer-left",onClick:this.handleChangeClick})),!i&&!t&&a.createElement("span",{className:"spacer-left"},a.createElement("a",{className:"link-no-underline",href:"#",onClick:this.handleHelpClick},a.createElement(u.a,{className:"text-text-bottom",fill:s.gray80})),a.createElement(p.a,{isOpen:this.state.noSupportPopup,position:"bottomright",popup:a.createElement(o.a,null),togglePopup:this.toggleNoSupportPopup})),n&&a.createElement(r.a,{onClose:this.closeForm,workerCount:this.state.workerCount}))},t}(a.PureComponent);t.a=h},2096:function(e,t,n){"use strict";var a=n(0),r=(n.n(a),n(5)),o=(n.n(r),n(1918)),s=n(27),c=n(175),i=n(2),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u=function(e){function t(t){var n=e.call(this,t)||this;return n.handleClose=function(){return n.props.onClose()},n.handleWorkerCountChange=function(e){return n.setState({newWorkerCount:e.value})},n.handleSubmit=function(e){e.preventDefault(),n.setState({submitting:!0});var t=n.state.newWorkerCount;Object(o.i)(t).then(function(){n.mounted&&n.props.onClose(t)},function(){n.mounted&&n.setState({submitting:!1})})},n.state={newWorkerCount:t.workerCount,submitting:!1},n}return l(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=Object(r.times)(10).map(function(e,t){return{label:String(t+1),value:t+1}});return a.createElement(s.a,{contentLabel:Object(i.translate)("background_tasks.change_number_of_workers"),onRequestClose:this.handleClose},a.createElement("header",{className:"modal-head"},a.createElement("h2",null,Object(i.translate)("background_tasks.change_number_of_workers"))),a.createElement("form",{onSubmit:this.handleSubmit},a.createElement("div",{className:"modal-body"},a.createElement(c.c,{className:"input-tiny spacer-top",clearable:!1,onChange:this.handleWorkerCountChange,options:e,searchable:!1,value:this.state.newWorkerCount}),a.createElement("div",{className:"big-spacer-top alert alert-success markdown"},Object(i.translate)("background_tasks.change_number_of_workers.hint"))),a.createElement("footer",{className:"modal-foot"},a.createElement("div",null,this.state.submitting&&a.createElement("i",{className:"spinner spacer-right"}),a.createElement("button",{disabled:this.state.submitting,type:"submit"},Object(i.translate)("save")),a.createElement("button",{type:"reset",className:"button-link",onClick:this.handleClose},Object(i.translate)("cancel"))))))},t}(a.PureComponent);t.a=u},2097:function(e,t,n){"use strict";function a(e){return r.createElement(o.a,{position:e.popupPosition,customClass:"bubble-popup-bottom-right"},r.createElement("div",{className:"abs-width-400"},r.createElement("h6",{className:"spacer-bottom"},Object(s.translate)("background_tasks.add_more_workers")),r.createElement("p",{className:"big-spacer-bottom markdown"},Object(s.translate)("background_tasks.add_more_workers.text")),r.createElement("p",null,r.createElement("a",{href:"https://redirect.sonarsource.com/editions/enterprise.html",target:"_blank"},Object(s.translate)("learn_more")))))}t.a=a;var r=n(0),o=(n.n(r),n(59)),s=n(2)},2098:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(2),s=function(e){return e.tasks.length<1e3?null:r.a.createElement("footer",{className:"spacer-top note text-center"},Object(o.translateWithParameters)("max_results_reached",1e3))};t.a=s},2099:function(e,t,n){"use strict";var a=n(9),r=n(2100),o=n(10),s=function(e){return{isSystemAdmin:!!Object(o.getAppState)(e).canAdmin}};t.a=Object(a.connect)(s)(r.a)},2100:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),c=n.n(s),i=n(23),l=n(79),u=n(2),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),m=function(e){function t(){var e,n,o,s;a(this,t);for(var c=arguments.length,i=Array(c),l=0;l<c;l++)i[l]=arguments[l];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleShowFailing=function(e){e.preventDefault(),e.currentTarget.blur(),o.props.onShowFailing()},s=n,r(o,s)}return o(t,e),p(t,[{key:"renderPending",value:function(){return null==this.props.pendingCount?null:this.props.pendingCount>0?c.a.createElement("span",null,c.a.createElement("span",{className:"js-pending-count emphasised-measure"},this.props.pendingCount)," ",Object(u.translate)("background_tasks.pending"),this.props.isSystemAdmin&&c.a.createElement(i.a,{overlay:Object(u.translate)("background_tasks.cancel_all_tasks")},c.a.createElement(l.b,{className:"js-cancel-pending spacer-left",onClick:this.props.onCancelAllPending}))):c.a.createElement("span",null,c.a.createElement("span",{className:"js-pending-count emphasised-measure"},this.props.pendingCount)," ",Object(u.translate)("background_tasks.pending"))}},{key:"renderFailures",value:function(){return null==this.props.failingCount?null:this.props.component?null:this.props.failingCount>0?c.a.createElement("span",null,c.a.createElement(i.a,{overlay:Object(u.translate)("background_tasks.failing_count")},c.a.createElement("a",{className:"js-failures-count emphasised-measure",href:"#",onClick:this.handleShowFailing},this.props.failingCount))," ",Object(u.translate)("background_tasks.failures")):c.a.createElement("span",null,c.a.createElement(i.a,{overlay:Object(u.translate)("background_tasks.failing_count")},c.a.createElement("span",{className:"js-failures-count emphasised-measure"},this.props.failingCount))," ",Object(u.translate)("background_tasks.failures"))}},{key:"render",value:function(){return c.a.createElement("section",{className:"big-spacer-top big-spacer-bottom"},c.a.createElement("span",null,this.renderPending()),c.a.createElement("span",{className:"huge-spacer-left"},this.renderFailures()))}}]),t}(c.a.PureComponent);t.a=m},2101:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),c=n.n(s),i=n(6),l=n.n(i),u=n(2102),p=n(2103),m=n(2104),d=n(2105),h=n(1914),f=n(81),b=n(2),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),g=function(e){function t(){var e,n,o,s;a(this,t);for(var c=arguments.length,i=Array(c),l=0;l<c;l++)i[l]=arguments[l];return n=o=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.handleQueryChange=function(e){o.props.onFilterUpdate({query:e})},s=n,r(o,s)}return o(t,e),k(t,[{key:"handleStatusChange",value:function(e){this.props.onFilterUpdate({status:e})}},{key:"handleTypeChange",value:function(e){this.props.onFilterUpdate({taskType:e})}},{key:"handleCurrentsChange",value:function(e){this.props.onFilterUpdate({currents:e})}},{key:"handleDateChange",value:function(e){this.props.onFilterUpdate(e)}},{key:"handleReload",value:function(e){e.target.blur(),this.props.onReload()}},{key:"handleReset",value:function(e){e.preventDefault(),e.target.blur(),this.props.onFilterUpdate(h.d)}},{key:"renderSearchBox",value:function(){var e=this.props,t=e.component,n=e.query;return t?null:c.a.createElement("li",{className:"bt-search-form-large"},c.a.createElement(f.a,{onChange:this.handleQueryChange,placeholder:Object(b.translate)("background_tasks.search_by_task_or_component"),value:n}))}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.component,a=e.types,r=e.status,o=e.taskType,s=e.currents,i=e.minSubmittedAt,l=e.maxExecutedAt;return c.a.createElement("section",{className:"big-spacer-top big-spacer-bottom"},c.a.createElement("ul",{className:"bt-search-form"},c.a.createElement("li",null,c.a.createElement("h6",{className:"bt-search-form-label"},Object(b.translate)("status")),c.a.createElement(u.a,{value:r,onChange:this.handleStatusChange.bind(this)})),a.length>1&&c.a.createElement("li",null,c.a.createElement("h6",{className:"bt-search-form-label"},Object(b.translate)("type")),c.a.createElement(p.a,{value:o,types:a,onChange:this.handleTypeChange.bind(this)})),!n&&c.a.createElement("li",null,c.a.createElement("h6",{className:"bt-search-form-label"},Object(b.translate)("background_tasks.currents_filter.ONLY_CURRENTS")),c.a.createElement(m.a,{value:s,onChange:this.handleCurrentsChange.bind(this)})),c.a.createElement("li",null,c.a.createElement("h6",{className:"bt-search-form-label"},Object(b.translate)("date")),c.a.createElement(d.a,{minSubmittedAt:i,maxExecutedAt:l,onChange:this.handleDateChange.bind(this)})),this.renderSearchBox(),c.a.createElement("li",{className:"nowrap"},c.a.createElement("button",{className:"js-reload",onClick:this.handleReload.bind(this),disabled:t},Object(b.translate)("reload"))," ",c.a.createElement("button",{ref:"resetButton",onClick:this.handleReset.bind(this),disabled:t},Object(b.translate)("reset_verb")))))}}]),t}(c.a.PureComponent);g.propTypes={loading:l.a.bool.isRequired,status:l.a.any.isRequired,taskType:l.a.any.isRequired,currents:l.a.any.isRequired,query:l.a.string.isRequired,onFilterUpdate:l.a.func.isRequired,onReload:l.a.func.isRequired},t.a=g},2102:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(1914),s=n(175),c=n(2),i=function(e){var t=e.value,n=e.onChange,a=[{value:o.e.ALL,label:Object(c.translate)("background_task.status.ALL")},{value:o.e.ALL_EXCEPT_PENDING,label:Object(c.translate)("background_task.status.ALL_EXCEPT_PENDING")},{value:o.e.PENDING,label:Object(c.translate)("background_task.status.PENDING")},{value:o.e.IN_PROGRESS,label:Object(c.translate)("background_task.status.IN_PROGRESS")},{value:o.e.SUCCESS,label:Object(c.translate)("background_task.status.SUCCESS")},{value:o.e.FAILED,label:Object(c.translate)("background_task.status.FAILED")},{value:o.e.CANCELED,label:Object(c.translate)("background_task.status.CANCELED")}];return r.a.createElement(s.c,{value:t,onChange:function(e){return n(e.value)},className:"input-medium",options:a,clearable:!1,searchable:!1})};t.a=i},2103:function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var r=n(0),o=n.n(r),s=n(1914),c=n(175),i=n(2),l=function(e){var t=e.value,n=e.onChange,r=e.types,l=r.map(function(e){return{value:e,label:Object(i.translate)("background_task.type",e)}}),u=[{value:s.a,label:Object(i.translate)("background_task.type.ALL")}].concat(a(l));return o.a.createElement(c.c,{value:t,onChange:function(e){return n(e.value)},className:"input-medium",options:u,clearable:!1,searchable:!1})};t.a=l},2104:function(e,t,n){"use strict";var a=n(0),r=(n.n(a),n(100)),o=n(1914),s=n(2),c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleChange=function(e){var n=e?o.b.ONLY_CURRENTS:o.b.ALL;t.props.onChange(n)},t}return c(t,e),t.prototype.render=function(){var e=this.props.value===o.b.ONLY_CURRENTS;return a.createElement("div",{className:"bt-search-form-field"},a.createElement(r.a,{checked:e,onCheck:this.handleChange},a.createElement("span",{className:"little-spacer-left"},Object(s.translate)("yes"))))},t}(a.PureComponent);t.a=i},2105:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(15),c=n.n(s),i=n(0),l=n.n(i),u=n(45),p=n(2),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),m(t,[{key:"componentDidMount",value:function(){this.attachDatePicker()}},{key:"componentDidUpdate",value:function(){this.attachDatePicker()}},{key:"attachDatePicker",value:function(){var e={dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,onSelect:this.handleChange.bind(this)};c.a.fn&&c.a.fn.datepicker&&(c()(this.refs.minDate).datepicker(e),c()(this.refs.maxDate).datepicker(e))}},{key:"handleChange",value:function(){var e={},t=Object(u.parseDate)(this.refs.minDate.value),n=Object(u.parseDate)(this.refs.maxDate.value);Object(u.isValidDate)(t)&&(e.minSubmittedAt=Object(u.toShortNotSoISOString)(t)),Object(u.isValidDate)(n)&&(e.maxExecutedAt=Object(u.toShortNotSoISOString)(n)),this.props.onChange(e)}},{key:"render",value:function(){var e=this.props,t=e.minSubmittedAt,n=e.maxExecutedAt;return l.a.createElement("div",{className:"nowrap"},l.a.createElement("input",{className:"input-small",value:t,onChange:function(){return!0},ref:"minDate",type:"text",placeholder:Object(p.translate)("from")})," ",l.a.createElement("input",{className:"input-small",value:n,onChange:function(){return!0},ref:"maxDate",type:"text",placeholder:Object(p.translate)("to")}))}}]),t}(i.Component);t.a=d},2106:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n(0),c=n.n(s),i=n(8),l=n.n(i),u=n(2107),p=n(2),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=c.a.createElement("th",null," "),h=c.a.createElement("th",null," "),f=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),m(t,[{key:"render",value:function(){var e=this.props,t=e.tasks,n=e.component,a=e.loading,r=e.onCancelTask,o=e.onFilterTask,s=l()("data zebra zebra-hover background-tasks",{"new-loading":a});return c.a.createElement("div",{className:"boxed-group boxed-group-inner"},c.a.createElement("table",{className:s},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,Object(p.translate)("background_tasks.table.status")),c.a.createElement("th",null,Object(p.translate)("background_tasks.table.task")),c.a.createElement("th",null,Object(p.translate)("background_tasks.table.id")),d,c.a.createElement("th",{className:"text-right"},Object(p.translate)("background_tasks.table.submitted")),c.a.createElement("th",{className:"text-right"},Object(p.translate)("background_tasks.table.started")),c.a.createElement("th",{className:"text-right"},Object(p.translate)("background_tasks.table.finished")),c.a.createElement("th",{className:"text-right"},Object(p.translate)("background_tasks.table.duration")),h)),c.a.createElement("tbody",null,t.map(function(e,t,a){return c.a.createElement(u.a,{key:e.id,task:e,tasks:a,component:n,onCancelTask:r,onFilterTask:o,previousTask:t>0?a[t-1]:void 0})}))))}}]),t}(c.a.PureComponent);t.a=f},2107:function(e,t,n){"use strict";function a(e){var t=e.task,n=e.component,a=e.onCancelTask,m=e.onFilterTask,d=e.previousTask;return r.createElement("tr",null,r.createElement(o.a,{status:t.status}),r.createElement(s.a,{task:t}),r.createElement(c.a,{id:t.id}),r.createElement(i.a,{submittedAt:t.submittedAt,prevSubmittedAt:d&&d.submittedAt}),r.createElement(l.a,{date:t.submittedAt}),r.createElement(l.a,{date:t.startedAt,baseDate:t.submittedAt}),r.createElement(l.a,{date:t.executedAt,baseDate:t.submittedAt}),r.createElement(u.a,{ms:t.executionTimeMs}),r.createElement(p.a,{component:n,task:t,onFilterTask:m,onCancelTask:a}))}t.a=a;var r=n(0),o=(n.n(r),n(2108)),s=n(2109),c=n(2111),i=n(2112),l=n(2113),u=n(2114),p=n(2115)},2108:function(e,t,n){"use strict";function a(e){var t,n=e.status;switch(n){case o.e.PENDING:t=r.createElement(s.a,null);break;case o.e.IN_PROGRESS:t=r.createElement("i",{className:"spinner"});break;case o.e.SUCCESS:t=r.createElement("span",{className:"badge badge-success"},Object(c.translate)("background_task.status.SUCCESS"));break;case o.e.FAILED:t=r.createElement("span",{className:"badge badge-danger"},Object(c.translate)("background_task.status.FAILED"));break;case o.e.CANCELED:t=r.createElement("span",{className:"badge badge-muted"},Object(c.translate)("background_task.status.CANCELED"));break;default:t=""}return r.createElement("td",{className:"thin spacer-right"},t)}t.a=a;var r=n(0),o=(n.n(r),n(1914)),s=n(606),c=n(2)},2109:function(e,t,n){"use strict";function a(e){var t=e.task;return t.componentKey?r.createElement("td",null,"SHORT"===t.branchType&&r.createElement(u.a,{className:"little-spacer-right"}),"LONG"===t.branchType&&r.createElement(p.a,{className:"little-spacer-right"}),!t.branchType&&t.componentQualifier&&r.createElement("span",{className:"little-spacer-right"},r.createElement(c.a,{qualifier:t.componentQualifier})),t.organization&&r.createElement(i.a,{organizationKey:t.organization}),t.componentName&&r.createElement(o.Link,{className:"spacer-right",to:Object(l.o)(t.componentKey,t.branch)},t.componentName,t.branch&&r.createElement("span",{className:"text-limited text-text-top",title:t.branch},r.createElement("span",{style:{marginLeft:5,marginRight:5}},"/"),t.branch)),r.createElement(s.a,{type:t.type})):r.createElement("td",null,r.createElement("span",{className:"note"},t.id),r.createElement(s.a,{type:t.type}))}t.a=a;var r=n(0),o=(n.n(r),n(13)),s=n(2110),c=n(80),i=n(1928),l=n(26),u=n(346),p=n(347)},2110:function(e,t,n){"use strict";function a(e){var t=e.type;return r.createElement("span",{className:"display-inline-block note"},"[",Object(o.translate)("background_task.type",t),"]")}t.a=a;var r=n(0),o=(n.n(r),n(2))},2111:function(e,t,n){"use strict";function a(e){var t=e.id;return r.createElement("td",{className:"thin nowrap"},r.createElement("div",{className:"note"},t))}t.a=a;var r=n(0);n.n(r)},2112:function(e,t,n){"use strict";function a(e){var t=e.submittedAt,n=e.prevSubmittedAt,a=!n||!Object(s.isSameDay)(Object(s.parseDate)(t),Object(s.parseDate)(n));return r.createElement("td",{className:"thin nowrap text-right"},a?r.createElement(o.a,{date:t,long:!0}):"")}t.a=a;var r=n(0),o=(n.n(r),n(324)),s=n(45)},2113:function(e,t,n){"use strict";function a(e){var t=e.date,n=e.baseDate,a=t&&Object(s.parseDate)(t),c=n&&Object(s.parseDate)(n),i=a&&c&&Object(s.isValidDate)(a)&&Object(s.isValidDate)(c)?Object(s.differenceInDays)(a,c):0;return r.createElement("td",{className:"thin nowrap text-right"},i>0&&r.createElement("span",{className:"text-warning little-spacer-right"},"(+"+i+"d)"),a&&Object(s.isValidDate)(a)?r.createElement(o.a,{date:a,long:!0}):"")}t.a=a;var r=n(0),o=(n.n(r),n(1978)),s=n(45)},2114:function(e,t,n){"use strict";function a(e){var t=e.ms;return r.createElement("td",{className:"thin nowrap text-right"},t&&Object(o.a)(t))}t.a=a;var r=n(0),o=(n.n(r),n(2010))},2115:function(e,t,n){"use strict";var a=n(0),r=(n.n(a),n(2116)),o=n(2117),s=n(1914),c=n(2),i=n(137),l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={scannerContextOpen:!1,stacktraceOpen:!1},t.handleFilterClick=function(){t.props.onFilterTask(t.props.task)},t.handleCancelClick=function(){t.props.onCancelTask(t.props.task)},t.handleShowScannerContextClick=function(){t.setState({scannerContextOpen:!0})},t.closeScannerContext=function(){return t.setState({scannerContextOpen:!1})},t.handleShowStacktraceClick=function(){t.setState({stacktraceOpen:!0})},t.closeStacktrace=function(){return t.setState({stacktraceOpen:!1})},t}return l(t,e),t.prototype.render=function(){var e=this.props,t=e.component,n=e.task,l=void 0===t,u=n.status===s.e.PENDING,p=void 0!==n.errorMessage;return l||u||n.hasScannerContext||p?a.createElement("td",{className:"thin nowrap"},a.createElement(i.c,{className:"js-task-action"},l&&n.componentName&&a.createElement(i.b,{className:"js-task-filter",onClick:this.handleFilterClick},Object(c.translateWithParameters)("background_tasks.filter_by_component_x",n.componentName)),u&&a.createElement(i.b,{className:"js-task-cancel",destructive:!0,onClick:this.handleCancelClick},Object(c.translate)("background_tasks.cancel_task")),n.hasScannerContext&&a.createElement(i.b,{className:"js-task-show-scanner-context",onClick:this.handleShowScannerContextClick},Object(c.translate)("background_tasks.show_scanner_context")),p&&a.createElement(i.b,{className:"js-task-show-stacktrace",onClick:this.handleShowStacktraceClick},Object(c.translate)("background_tasks.show_stacktrace"))),this.state.scannerContextOpen&&a.createElement(r.a,{onClose:this.closeScannerContext,task:n}),this.state.stacktraceOpen&&a.createElement(o.a,{onClose:this.closeStacktrace,task:n})):a.createElement("td",null," ")},t}(a.PureComponent);t.a=u},2116:function(e,t,n){"use strict";var a=n(0),r=(n.n(a),n(1918)),o=n(2),s=n(27),c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.handleCloseClick=function(e){e.preventDefault(),t.props.onClose()},t}return c(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.loadScannerContext()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.loadScannerContext=function(){var e=this;Object(r.e)(this.props.task.id,["scannerContext"]).then(function(t){e.mounted&&e.setState({scannerContext:t.scannerContext})})},t.prototype.render=function(){var e=this.props.task,t=this.state.scannerContext;return a.createElement(s.a,{contentLabel:"scanner context",large:!0,onRequestClose:this.props.onClose},a.createElement("div",{className:"modal-head"},a.createElement("h2",null,Object(o.translate)("background_tasks.scanner_context"),": ",e.componentName," [",Object(o.translate)("background_task.type",e.type),"]")),a.createElement("div",{className:"modal-body modal-container"},null!=t?a.createElement("pre",{className:"js-task-scanner-context"},t):a.createElement("i",{className:"spinner"})),a.createElement("div",{className:"modal-foot"},a.createElement("a",{href:"#",className:"js-modal-close",onClick:this.handleCloseClick},Object(o.translate)("close"))))},t}(a.PureComponent);t.a=i},2117:function(e,t,n){"use strict";var a=n(0),r=(n.n(a),n(1918)),o=n(2),s=n(27),c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={loading:!0},t.handleCloseClick=function(e){e.preventDefault(),t.props.onClose()},t}return c(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.loadStacktrace()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.loadStacktrace=function(){var e=this;Object(r.e)(this.props.task.id,["stacktrace"]).then(function(t){e.mounted&&e.setState({loading:!1,stacktrace:t.errorStacktrace})},function(){e.mounted&&e.setState({loading:!1})})},t.prototype.render=function(){var e=this.props.task,t=this.state,n=t.loading,r=t.stacktrace;return a.createElement(s.a,{contentLabel:"stacktrace",large:!0,onRequestClose:this.props.onClose},a.createElement("div",{className:"modal-head"},a.createElement("h2",null,Object(o.translate)("background_tasks.error_stacktrace"),": ",e.componentName," [",Object(o.translate)("background_task.type",e.type),"]")),a.createElement("div",{className:"modal-body modal-container"},n?a.createElement("i",{className:"spinner"}):r?a.createElement("div",null,a.createElement("h4",{className:"spacer-bottom"},Object(o.translate)("background_tasks.error_stacktrace")),a.createElement("pre",{className:"js-task-stacktrace"},r)):a.createElement("div",null,a.createElement("h4",{className:"spacer-bottom"},Object(o.translate)("background_tasks.error_message")),a.createElement("pre",{className:"js-task-error-message"},e.errorMessage))),a.createElement("div",{className:"modal-foot"},a.createElement("a",{href:"#",className:"js-modal-close",onClick:this.handleCloseClick},Object(o.translate)("close"))))},t}(a.PureComponent);t.a=i},2118:function(e,t,n){var a=n(2119);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0};r.transform=void 0;n(1861)(a,r);a.locals&&(e.exports=a.locals)},2119:function(e,t,n){t=e.exports=n(1860)(void 0),t.push([e.i,".bt-search-form{display:flex;align-items:flex-end}.bt-search-form>li+li{margin-left:16px}.bt-search-form-label{margin-bottom:4px}.bt-search-form-field{padding:4px 0}.bt-search-form-large{flex:1}.bt-workers-warning-icon{position:relative;top:-1px}.bt-workers-warning-icon:before{color:#d3d3d3}",""])}});
//# sourceMappingURL=245.f525d1be.chunk.js.map