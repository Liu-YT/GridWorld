webpackJsonp([256],{1886:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),o=n(601),r=n(2344),i=n(10),c=n(135),l=function(e){return Object.assign({},Object(i.getQualityGatesAppState)(e),{metrics:Object(i.getMetrics)(e)})},s=function(e){return{onShow:function(t){return e(Object(o.t)(t))},onDelete:function(t){return e(Object(o.o)(t))},onRename:function(t,n){return e(Object(o.p)(t,n))},onCopy:function(t){return e(Object(o.m)(t))},onSetAsDefault:function(t){return e(Object(o.r)(t))},onAddCondition:function(t){return e(Object(o.k)(t))},onSaveCondition:function(t,n){return e(Object(o.q)(t,n))},onDeleteCondition:function(t){return e(Object(o.n)(t))},fetchMetrics:function(){return e(Object(c.e)())}}};t.default=Object(a.connect)(l,s)(r.a)},1915:function(e,t,n){"use strict";function a(e){return Object(b.getJSON)("/api/qualitygates/list",e).catch(g.a)}function o(e){return Object(b.getJSON)("/api/qualitygates/show",e).catch(g.a)}function r(e){return Object(b.postJSON)("/api/qualitygates/create",e).catch(g.a)}function i(e){return Object(b.post)("/api/qualitygates/destroy",e).catch(g.a)}function c(e){return Object(b.post)("/api/qualitygates/rename",e).catch(g.a)}function l(e){return Object(b.postJSON)("/api/qualitygates/copy",e).catch(g.a)}function s(e){return Object(b.post)("/api/qualitygates/set_as_default",e).catch(g.a)}function u(e){return Object(b.postJSON)("/api/qualitygates/create_condition",e)}function p(e){return Object(b.postJSON)("/api/qualitygates/update_condition",e)}function d(e){return Object(b.post)("/api/qualitygates/delete_condition",e)}function m(e){return Object(b.getJSON)("/api/qualitygates/get_by_project",e).then(function(e){var t=e.qualityGate;return t&&v({},t,{isDefault:t.default})},g.a)}function f(e){return Object(b.post)("/api/qualitygates/select",e).catch(g.a)}function h(e){return Object(b.post)("/api/qualitygates/deselect",e).catch(g.a)}function y(e){return Object(b.getJSON)("/api/qualitygates/application_status",e).catch(g.a)}t.i=a,t.h=o,t.d=r,t.f=i,t.l=c,t.b=l,t.m=s,t.c=u,t.n=p,t.e=d,t.k=m,t.a=f,t.g=h,t.j=y;var b=n(14),g=n(31),v=this&&this.__assign||Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}},1992:function(e,t,n){"use strict";function a(e){var t=e.className,n=e.tooltip,a=void 0===n||n,l=o.createElement("div",{className:r("outline-badge",t)},Object(c.translate)("quality_gates.built_in")),s=o.createElement("div",null,o.createElement("span",null,Object(c.translate)("quality_gates.built_in.description.1")),o.createElement("span",{className:"little-spacer-left"},Object(c.translate)("quality_gates.built_in.description.2")));return a?o.createElement(i.a,{overlay:s},l):l}t.a=a;var o=n(0),r=(n.n(o),n(8)),i=(n.n(r),n(23)),c=n(2)},2344:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),c=n.n(i),l=n(6),s=n.n(l),u=n(24),p=n.n(u),d=n(1915),m=n(2345),f=n(2349),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),y=function(e){function t(){var e,n,r,i;a(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.fetchDetails=function(){return Object(d.h)({id:r.props.params.id,organization:r.props.organization&&r.props.organization.key}).then(function(e){return r.props.onShow(e)},function(){})},i=n,o(r,i)}return r(t,e),h(t,[{key:"componentDidMount",value:function(){this.props.fetchMetrics(),this.fetchDetails()}},{key:"componentDidUpdate",value:function(e){e.params.id!==this.props.params.id&&this.fetchDetails()}},{key:"render",value:function(){var e=this.props,t=e.organization,n=e.metrics,a=e.qualityGate,o=this.props,r=o.onAddCondition,i=o.onDeleteCondition,l=o.onSaveCondition;return a?c.a.createElement("div",{className:"layout-page-main"},c.a.createElement(p.a,{title:a.name}),c.a.createElement(m.a,{qualityGate:a,onRename:this.props.onRename,onCopy:this.props.onCopy,onSetAsDefault:this.props.onSetAsDefault,onDelete:this.props.onDelete,organization:t&&t.key}),c.a.createElement(f.a,{gate:a,metrics:n,onAddCondition:r,onSaveCondition:l,onDeleteCondition:i,organization:t&&t.key})):null}}]),t}(c.a.PureComponent);y.contextTypes={router:s.a.object.isRequired},t.a=y},2345:function(e,t,n){"use strict";var a=n(0),o=(n.n(a),n(1992)),r=n(2346),i=n(2347),c=n(2348),l=n(1915),s=n(2),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={openPopup:void 0},t.handleRenameClick=function(e){e.preventDefault(),t.setState({openPopup:"rename"})},t.handleCopyClick=function(e){e.preventDefault(),t.setState({openPopup:"copy"})},t.handleSetAsDefaultClick=function(e){e.preventDefault();var n=t.props,a=n.qualityGate,o=n.onSetAsDefault,r=n.organization;a.isDefault||Object(l.m)({id:a.id,organization:r}).then(function(){return Object(l.h)({id:a.id,organization:r})}).then(function(e){return o(e)},function(){})},t.handleDeleteClick=function(e){e.preventDefault(),t.setState({openPopup:"delete"})},t.handleClosePopup=function(){return t.setState({openPopup:void 0})},t}return u(t,e),t.prototype.render=function(){var e=this.props,t=e.organization,n=e.qualityGate,l=this.state.openPopup,u=n.actions||{};return a.createElement("div",{className:"layout-page-header-panel layout-page-main-header issues-main-header"},a.createElement("div",{className:"layout-page-header-panel-inner layout-page-main-header-inner"},a.createElement("div",{className:"layout-page-main-inner"},a.createElement("h2",{className:"pull-left"},n.name,n.isBuiltIn&&a.createElement(o.a,{className:"spacer-left"})),a.createElement("div",{className:"pull-right"},u.rename&&a.createElement("button",{id:"quality-gate-rename",onClick:this.handleRenameClick},Object(s.translate)("rename")),u.copy&&a.createElement("button",{className:"little-spacer-left",id:"quality-gate-copy",onClick:this.handleCopyClick},Object(s.translate)("copy")),u.setAsDefault&&a.createElement("button",{className:"little-spacer-left",id:"quality-gate-toggle-default",onClick:this.handleSetAsDefaultClick},Object(s.translate)("set_as_default")),u.delete&&a.createElement("button",{id:"quality-gate-delete",className:"little-spacer-left button-red",onClick:this.handleDeleteClick},Object(s.translate)("delete")),"rename"===l&&a.createElement(r.a,{onRename:this.props.onRename,organization:t,onClose:this.handleClosePopup,qualityGate:n}),"copy"===l&&a.createElement(i.a,{onCopy:this.props.onCopy,organization:t,onClose:this.handleClosePopup,qualityGate:n}),"delete"===l&&a.createElement(c.a,{onDelete:this.props.onDelete,organization:t,onClose:this.handleClosePopup,qualityGate:n})))))},t}(a.PureComponent);t.a=p},2346:function(e,t,n){"use strict";var a=n(0),o=(n.n(a),n(27)),r=n(1915),i=n(2),c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),l=function(e){function t(t){var n=e.call(this,t)||this;return n.handleCancelClick=function(e){e.preventDefault(),n.props.onClose()},n.handleNameChange=function(e){n.setState({name:e.currentTarget.value})},n.handleFormSubmit=function(e){e.preventDefault();var t=n.props,a=t.qualityGate,o=t.organization,i=n.state.name;i&&(n.setState({loading:!0}),Object(r.l)({id:a.id,name:i,organization:o}).then(function(){n.props.onRename(a,i),n.props.onClose()},function(){n.mounted&&n.setState({loading:!1})}))},n.state={loading:!1,name:t.qualityGate.name},n}return c(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.qualityGate,t=this.state,n=t.loading,r=t.name,c=Object(i.translate)("quality_gates.rename"),l=n||!r||e&&e.name===r;return a.createElement(o.a,{contentLabel:c,onRequestClose:this.props.onClose},a.createElement("form",{id:"quality-gate-form",onSubmit:this.handleFormSubmit},a.createElement("div",{className:"modal-head"},a.createElement("h2",null,c)),a.createElement("div",{className:"modal-body"},a.createElement("div",{className:"modal-field"},a.createElement("label",{htmlFor:"quality-gate-form-name"},Object(i.translate)("name"),a.createElement("em",{className:"mandatory"},"*")),a.createElement("input",{autoFocus:!0,id:"quality-gate-form-name",maxLength:100,onChange:this.handleNameChange,required:!0,size:50,type:"text",value:r}))),a.createElement("div",{className:"modal-foot"},n&&a.createElement("i",{className:"spinner spacer-right"}),a.createElement("button",{disabled:l,className:"js-confirm"},Object(i.translate)("rename")),a.createElement("a",{href:"#",className:"js-modal-close",onClick:this.handleCancelClick},Object(i.translate)("cancel")))))},t}(a.PureComponent);t.a=l},2347:function(e,t,n){"use strict";var a=n(0),o=(n.n(a),n(6)),r=(n.n(o),n(27)),i=n(1915),c=n(26),l=n(2),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u=function(e){function t(t){var n=e.call(this,t)||this;return n.handleCancelClick=function(e){e.preventDefault(),n.props.onClose()},n.handleNameChange=function(e){n.setState({name:e.currentTarget.value})},n.handleFormSubmit=function(e){e.preventDefault();var t=n.props,a=t.qualityGate,o=t.organization,r=n.state.name;r&&(n.setState({loading:!0}),Object(i.b)({id:a.id,name:r,organization:o}).then(function(e){n.props.onCopy(e),n.props.onClose(),n.context.router.push(Object(c.p)(String(e.id),n.props.organization))},function(){n.mounted&&n.setState({loading:!1})}))},n.state={loading:!1,name:t.qualityGate.name},n}return s(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.qualityGate,t=this.state,n=t.loading,o=t.name,i=Object(l.translate)("quality_gates.copy"),c=n||!o||e&&e.name===o;return a.createElement(r.a,{contentLabel:i,onRequestClose:this.props.onClose},a.createElement("form",{id:"quality-gate-form",onSubmit:this.handleFormSubmit},a.createElement("div",{className:"modal-head"},a.createElement("h2",null,i)),a.createElement("div",{className:"modal-body"},a.createElement("div",{className:"modal-field"},a.createElement("label",{htmlFor:"quality-gate-form-name"},Object(l.translate)("name"),a.createElement("em",{className:"mandatory"},"*")),a.createElement("input",{autoFocus:!0,id:"quality-gate-form-name",maxLength:100,onChange:this.handleNameChange,required:!0,size:50,type:"text",value:o}))),a.createElement("div",{className:"modal-foot"},n&&a.createElement("i",{className:"spinner spacer-right"}),a.createElement("button",{disabled:c,className:"js-confirm"},Object(l.translate)("copy")),a.createElement("a",{href:"#",className:"js-modal-close",onClick:this.handleCancelClick},Object(l.translate)("cancel")))))},t.contextTypes={router:o.object},t}(a.PureComponent);t.a=u},2348:function(e,t,n){"use strict";var a=n(0),o=(n.n(a),n(6)),r=(n.n(o),n(27)),i=n(26),c=n(1915),l=n(2),s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={loading:!1},t.handleCancelClick=function(e){e.preventDefault(),t.props.onClose()},t.handleFormSubmit=function(e){e.preventDefault();var n=t.props,a=n.organization,o=n.qualityGate;t.setState({loading:!0}),Object(c.f)({id:o.id,organization:a}).then(function(){t.props.onDelete(o),t.context.router.replace(Object(i.q)(a))},function(){t.mounted&&t.setState({loading:!1})})},t}return s(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.qualityGate,t=Object(l.translate)("quality_gates.delete");return a.createElement(r.a,{contentLabel:t,onRequestClose:this.props.onClose},a.createElement("form",{id:"delete-profile-form",onSubmit:this.handleFormSubmit},a.createElement("div",{className:"modal-head"},a.createElement("h2",null,t)),a.createElement("div",{className:"modal-body"},a.createElement("p",null,Object(l.translateWithParameters)("quality_gates.delete.confirm.message",e.name))),a.createElement("div",{className:"modal-foot"},this.state.loading&&a.createElement("i",{className:"spinner spacer-right"}),a.createElement("button",{className:"js-delete button-red",disabled:this.state.loading},Object(l.translate)("delete")),a.createElement("a",{href:"#",className:"js-modal-close",onClick:this.handleCancelClick},Object(l.translate)("cancel")))))},t.contextTypes={router:o.object},t}(a.PureComponent);t.a=u},2349:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),c=n.n(i),l=n(2350),s=n(2356),u=n(2),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),p(t,[{key:"render",value:function(){var e=this.props,t=e.gate,n=e.metrics,a=e.organization,o=this.props,r=o.onAddCondition,i=o.onDeleteCondition,p=o.onSaveCondition,d=t.conditions||[],m=t.actions||{},f=m.associateProjects?Object(u.translate)("quality_gates.projects_for_default.edit"):Object(u.translate)("quality_gates.projects_for_default");return c.a.createElement("div",{className:"layout-page-main-inner"},c.a.createElement(l.a,{qualityGate:t,conditions:d,metrics:n,edit:m.manageConditions,onAddCondition:r,onSaveCondition:p,onDeleteCondition:i,organization:a}),c.a.createElement("div",{id:"quality-gate-projects",className:"quality-gate-section"},c.a.createElement("h3",{className:"spacer-bottom"},Object(u.translate)("quality_gates.projects")),t.isDefault?f:c.a.createElement(s.a,{qualityGate:t,edit:m.associateProjects,organization:a})))}}]),t}(c.a.PureComponent);t.a=d},2350:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return e.id?e.id:"new-"+t}var c=n(0),l=n.n(c),s=n(5),u=(n.n(s),n(2351)),p=n(2352),d=n(2353),m=n(2),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),h=l.a.createElement(u.a,null),y=l.a.createElement("th",null),b=function(e){function t(){var e,n,r,i;a(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={error:null},i=n,o(r,i)}return r(t,e),f(t,[{key:"componentWillUpdate",value:function(e){e.qualityGate!==this.props.qualityGate&&this.setState({error:null})}},{key:"handleError",value:function(e){var t=this;try{e.response.json().then(function(e){var n=e.errors.map(function(e){return e.msg}).join(". ");t.setState({error:n})})}catch(e){this.setState({error:Object(m.translate)("default_error_message")})}}},{key:"handleResetError",value:function(){this.setState({error:null})}},{key:"render",value:function(){var e=this,t=this.props,n=t.qualityGate,a=t.conditions,o=t.metrics,r=t.edit,c=t.onAddCondition,u=t.onSaveCondition,f=t.onDeleteCondition,b=t.organization,g=a.filter(function(e){return o[e.metric]}),v=Object(s.sortBy)(g,function(e){return o[e.metric]&&o[e.metric].name}),O=[],j=g.filter(function(e){return null!=e.id});j.forEach(function(e){j.filter(function(t){return t.metric===e.metric&&t.period===e.period}).length>1&&O.push(e)});var _=Object(s.uniqBy)(O,function(e){return e.metric}).map(function(e){return Object.assign({},e,{metric:o[e.metric]})});return l.a.createElement("div",{id:"quality-gate-conditions",className:"quality-gate-section"},l.a.createElement("h3",{className:"spacer-bottom"},Object(m.translate)("quality_gates.conditions")),h,this.state.error&&l.a.createElement("div",{className:"alert alert-danger"},this.state.error),_.length>0&&l.a.createElement("div",{className:"alert alert-warning"},l.a.createElement("p",null,Object(m.translate)("quality_gates.duplicated_conditions")),l.a.createElement("ul",{className:"list-styled spacer-top"},_.map(function(e){return l.a.createElement("li",{key:e.metric.key},Object(m.getLocalizedMetricName)(e.metric))}))),v.length?l.a.createElement("table",{id:"quality-gate-conditions",className:"data zebra zebra-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"nowrap"},Object(m.translate)("quality_gates.conditions.metric")),l.a.createElement("th",{className:"thin nowrap"},Object(m.translate)("quality_gates.conditions.leak")),l.a.createElement("th",{className:"thin nowrap"},Object(m.translate)("quality_gates.conditions.operator")),l.a.createElement("th",{className:"thin nowrap"},Object(m.translate)("quality_gates.conditions.warning")),l.a.createElement("th",{className:"thin nowrap"},Object(m.translate)("quality_gates.conditions.error")),r&&y)),l.a.createElement("tbody",null,v.map(function(t,a){return l.a.createElement(d.a,{key:i(t,a),qualityGate:n,condition:t,metric:o[t.metric],edit:r,onSaveCondition:u,onDeleteCondition:f,onError:e.handleError.bind(e),onResetError:e.handleResetError.bind(e),organization:b})}))):l.a.createElement("div",{className:"big-spacer-top"},Object(m.translate)("quality_gates.no_conditions")),r&&l.a.createElement(p.a,{metrics:o,onSelect:c}))}}]),t}(l.a.PureComponent);t.a=b},2351:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),c=n.n(i),l=n(2),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=c.a.createElement("i",{className:"icon-alert-ok"}),p=c.a.createElement("i",{className:"icon-alert-warn"}),d=c.a.createElement("i",{className:"icon-alert-error"}),m=function(e){function t(){var e,n,r,i;a(this,t);for(var c=arguments.length,l=Array(c),s=0;s<c;s++)l[s]=arguments[s];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={expanded:!1},i=n,o(r,i)}return r(t,e),s(t,[{key:"handleMoreClick",value:function(e){e.preventDefault(),this.setState({expanded:!0})}},{key:"render",value:function(){var e=this.state.expanded;return c.a.createElement("div",{className:"big-spacer-bottom"},Object(l.translate)("quality_gates.introduction"),!e&&c.a.createElement("a",{className:"spacer-left",href:"#",onClick:this.handleMoreClick.bind(this)},Object(l.translate)("more")),e&&c.a.createElement("div",{className:"spacer-top"},Object(l.translate)("quality_gates.health_icons"),c.a.createElement("ul",null,c.a.createElement("li",{className:"little-spacer-top"},u," ",Object(l.translate)("alerts.notes.ok")),c.a.createElement("li",{className:"little-spacer-top"},p," ",Object(l.translate)("alerts.notes.warn")),c.a.createElement("li",{className:"little-spacer-top"},d," ",Object(l.translate)("alerts.notes.error")))))}}]),t}(i.Component);t.a=m},2352:function(e,t,n){"use strict";function a(e){function t(e){var t=e.value;a(t)}var n=e.metrics,a=e.onSelect,o=Object(i.omitBy)(n,function(e){return e.hidden}),s=Object(i.sortBy)(Object(i.map)(o,function(e){return{value:e.key,label:Object(l.getLocalizedMetricName)(e),domain:e.domain}}),"domain"),u=[];return s.forEach(function(e,t,n){var a=t>0?n[t-1]:null;a&&a.domain===e.domain||u.push({value:e.domain,label:Object(l.getLocalizedMetricDomain)(e.domain),disabled:!0}),u.push(e)}),r.a.createElement("div",{className:"big-spacer-top panel bg-muted"},r.a.createElement(c.c,{id:"quality-gate-new-condition-metric",className:"text-middle input-large",options:u,placeholder:Object(l.translate)("quality_gates.add_condition"),onChange:t}))}t.a=a;var o=n(0),r=n.n(o),i=n(5),c=(n.n(i),n(175)),l=n(2)},2353:function(e,t,n){"use strict";var a=n(0),o=(n.n(a),n(100)),r=n(2354),i=n(175),c=n(2355),l=n(1915),s=n(2),u=n(44),p=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),d=this&&this.__assign||Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},m=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOperatorChange=function(e){var t=e.value;return n.setState({changed:!0,op:t})},n.handlePeriodChange=function(e){var t=e?1:void 0;n.setState({changed:!0,period:t})},n.handleWarningChange=function(e){return n.setState({changed:!0,warning:e})},n.handleErrorChange=function(e){return n.setState({changed:!0,error:e})},n.handleSaveClick=function(){var e=n.props,t=e.qualityGate,a=e.condition,o=e.metric,r=e.organization,i=n.state.period,c={metric:a.metric,op:"RATING"===o.type?"GT":n.state.op,warning:n.state.warning,error:n.state.error};i&&"RATING"!==o.type&&(c.period=i),0===o.key.indexOf("new_")&&(c.period=1),Object(l.c)(d({gateId:t.id,organization:r},c)).then(n.handleConditionResponse,n.props.onError)},n.handleUpdateClick=function(){var e=n.props,t=e.condition,a=e.metric,o=e.organization,r=n.state.period,i={id:t.id,metric:t.metric,op:"RATING"===a.type?"GT":n.state.op,warning:n.state.warning,error:n.state.error};r&&"RATING"!==a.type&&(i.period=r),0===a.key.indexOf("new_")&&(i.period=1),Object(l.n)(d({organization:o},i)).then(n.handleConditionResponse,n.props.onError)},n.handleConditionResponse=function(e){n.setState({changed:!1}),n.props.onSaveCondition(n.props.condition,e),n.props.onResetError()},n.handleCancelClick=function(e){e.preventDefault(),e.stopPropagation(),n.props.onDeleteCondition(n.props.condition)},n.openDeleteConditionForm=function(){return n.setState({openDeleteCondition:!0})},n.closeDeleteConditionForm=function(){return n.setState({openDeleteCondition:!1})},n.state={changed:!1,period:t.condition.period,op:t.condition.op,openDeleteCondition:!1,warning:t.condition.warning||"",error:t.condition.error||""},n}return p(t,e),t.prototype.renderPeriodValue=function(){var e=this.props,t=e.condition,n=e.metric,o=!!this.state.period,r=0===t.metric.indexOf("new_"),i="RATING"===n.type;return r?a.createElement("span",{className:"note"},Object(s.translate)("quality_gates.condition.leak.unconditional")):i?a.createElement("span",{className:"note"},Object(s.translate)("quality_gates.condition.leak.never")):o?Object(s.translate)("quality_gates.condition.leak.yes"):Object(s.translate)("quality_gates.condition.leak.no")},t.prototype.renderPeriod=function(){var e=this.props,t=e.condition,n=e.metric,r=e.edit,i=0===t.metric.indexOf("new_"),c="RATING"===n.type,l=!!this.state.period;return c||i||!r?this.renderPeriodValue():a.createElement(o.a,{checked:l,onCheck:this.handlePeriodChange})},t.prototype.renderOperator=function(){var e=this.props,t=e.condition,n=e.edit,o=e.metric;if(!n&&t.op)return"RATING"===o.type?Object(s.translate)("quality_gates.operator",t.op,"rating"):Object(s.translate)("quality_gates.operator",t.op);if("RATING"===o.type)return a.createElement("span",{className:"note"},Object(s.translate)("quality_gates.operator.GT.rating"));var r=["LT","GT","EQ","NE"],c=r.map(function(e){return{label:Object(s.translate)("quality_gates.operator",e),value:e}});return a.createElement(i.c,{autofocus:!0,className:"input-medium",clearable:!1,name:"operator",onChange:this.handleOperatorChange,options:c,searchable:!1,value:this.state.op})},t.prototype.render=function(){var e=this.props,t=e.condition,n=e.edit,o=e.metric,i=e.organization;return a.createElement("tr",null,a.createElement("td",{className:"text-middle"},Object(s.getLocalizedMetricName)(o),o.hidden&&a.createElement("span",{className:"text-danger little-spacer-left"},Object(s.translate)("deprecated"))),a.createElement("td",{className:"thin text-middle nowrap"},this.renderPeriod()),a.createElement("td",{className:"thin text-middle nowrap"},this.renderOperator()),a.createElement("td",{className:"thin text-middle nowrap"},n?a.createElement(c.a,{name:"warning",value:this.state.warning,metric:o,onChange:this.handleWarningChange}):Object(u.formatMeasure)(t.warning,o.type)),a.createElement("td",{className:"thin text-middle nowrap"},n?a.createElement(c.a,{name:"error",value:this.state.error,metric:o,onChange:this.handleErrorChange}):Object(u.formatMeasure)(t.error,o.type)),n&&a.createElement("td",{className:"thin text-middle nowrap"},t.id?a.createElement("div",null,a.createElement("button",{className:"update-condition",disabled:!this.state.changed,onClick:this.handleUpdateClick},Object(s.translate)("update_verb")),a.createElement("button",{className:"button-red delete-condition little-spacer-left",onClick:this.openDeleteConditionForm},Object(s.translate)("delete")),this.state.openDeleteCondition&&a.createElement(r.a,{condition:t,metric:o,onClose:this.closeDeleteConditionForm,onDelete:this.props.onDeleteCondition,organization:i})):a.createElement("div",null,a.createElement("button",{className:"add-condition",onClick:this.handleSaveClick},Object(s.translate)("add_verb")),a.createElement("a",{className:"cancel-add-condition spacer-left",href:"#",onClick:this.handleCancelClick},Object(s.translate)("cancel")))))},t}(a.PureComponent);t.a=m},2354:function(e,t,n){"use strict";var a=n(0),o=(n.n(a),n(27)),r=n(1915),i=n(2),c=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={loading:!1},t.handleCancelClick=function(e){e.preventDefault(),t.props.onClose()},t.handleFormSubmit=function(e){e.preventDefault();var n=t.props,a=n.organization,o=n.condition;t.setState({loading:!0}),Object(r.e)({id:o.id,organization:a}).then(function(){return t.props.onDelete(o)},function(){t.mounted&&t.setState({loading:!1})})},t}return c(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.render=function(){var e=this.props.metric,t=Object(i.translate)("quality_gates.delete_condition");return a.createElement(o.a,{contentLabel:t,onRequestClose:this.props.onClose},a.createElement("form",{id:"delete-profile-form",onSubmit:this.handleFormSubmit},a.createElement("div",{className:"modal-head"},a.createElement("h2",null,t)),a.createElement("div",{className:"modal-body"},a.createElement("p",null,Object(i.translateWithParameters)("quality_gates.delete_condition.confirm.message",Object(i.getLocalizedMetricName)(e)))),a.createElement("div",{className:"modal-foot"},this.state.loading&&a.createElement("i",{className:"spinner spacer-right"}),a.createElement("button",{className:"js-delete button-red",disabled:this.state.loading},Object(i.translate)("delete")),a.createElement("a",{href:"#",className:"js-modal-close",onClick:this.handleCancelClick},Object(i.translate)("cancel")))))},t}(a.PureComponent);t.a=l},2355:function(e,t,n){"use strict";var a=n(0),o=(n.n(a),n(175)),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleChange=function(e){t.props.onChange(e.currentTarget.value)},t.handleSelectChange=function(e){e?t.props.onChange(e.value):t.props.onChange("")},t}return r(t,e),t.prototype.renderRatingInput=function(){var e=this.props,t=e.name,n=e.value,r=[{label:"A",value:"1"},{label:"B",value:"2"},{label:"C",value:"3"},{label:"D",value:"4"}];return a.createElement(o.c,{className:"input-tiny text-middle",clearable:!0,name:t,onChange:this.handleSelectChange,options:r,placeholder:"",searchable:!1,value:n})},t.prototype.render=function(){var e=this.props,t=e.name,n=e.value,o=e.metric;return"RATING"===o.type?this.renderRatingInput():a.createElement("input",{name:t,type:"text",className:"input-tiny text-middle",value:n,"data-type":o.type,onChange:this.handleChange})},t}(a.PureComponent);t.a=i},2356:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),c=n.n(i),l=n(2357),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),s(t,[{key:"componentDidMount",value:function(){this.renderView()}},{key:"componentWillUpdate",value:function(){this.destroyView()}},{key:"componentDidUpdate",value:function(){this.renderView()}},{key:"componentWillUnmount",value:function(){this.destroyView()}},{key:"destroyView",value:function(){this.projectsView&&this.projectsView.destroy()}},{key:"renderView",value:function(){var e=this.props,t=e.qualityGate,n=e.edit,a=e.organization;this.projectsView=new l.a({qualityGate:t,edit:n,container:this.refs.container,organization:a}),this.projectsView.render()}},{key:"render",value:function(){return c.a.createElement("div",{ref:"container"})}}]),t}(c.a.PureComponent);t.a=u},2357:function(e,t,n){"use strict";var a=n(12),o=n.n(a),r=n(178),i=n.n(r),c=n(338),l=n(2);t.a=o.a.ItemView.extend({template:function(){},onRender:function(){var e=this.options,t=e.qualityGate,n=e.organization,a={gateId:t.id},o="";n&&(a.organization=n,o="&organization="+n),new c.a({el:this.options.container,width:"100%",readOnly:!this.options.edit,focusSearch:!1,dangerouslyUnescapedHtmlFormat:function(e){return i()(e.name)},searchUrl:window.baseUrl+"/api/qualitygates/search?gateId="+t.id+o,selectUrl:window.baseUrl+"/api/qualitygates/select",deselectUrl:window.baseUrl+"/api/qualitygates/deselect",extra:a,selectParameter:"projectId",selectParameterValue:"id",labels:{selected:Object(l.translate)("quality_gates.projects.with"),deselected:Object(l.translate)("quality_gates.projects.without"),all:Object(l.translate)("quality_gates.projects.all"),noResults:Object(l.translate)("quality_gates.projects.noResults")},tooltips:{select:Object(l.translate)("quality_gates.projects.select_hint"),deselect:Object(l.translate)("quality_gates.projects.deselect_hint")}})},serializeData:function(){return Object.assign({},o.a.ItemView.prototype.serializeData.apply(this,arguments),{canEdit:this.options.edit})}})}});
//# sourceMappingURL=256.9e38a937.chunk.js.map