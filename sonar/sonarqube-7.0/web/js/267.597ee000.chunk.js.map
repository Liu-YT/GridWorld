{"version":3,"sources":["webpack:///js/267.597ee000.chunk.js","webpack:///./src/main/js/apps/projectQualityProfiles/App.tsx","webpack:///./src/main/js/app/utils/addGlobalSuccessMessage.ts","webpack:///./src/main/js/apps/projectQualityProfiles/Header.tsx","webpack:///./src/main/js/apps/projectQualityProfiles/Table.tsx","webpack:///./src/main/js/apps/projectQualityProfiles/ProfileRow.tsx"],"names":["webpackJsonp","1897","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_1_react_helmet__","n","__WEBPACK_IMPORTED_MODULE_1_react_helmet___default","__WEBPACK_IMPORTED_MODULE_2__Header__","__WEBPACK_IMPORTED_MODULE_3__Table__","__WEBPACK_IMPORTED_MODULE_4__api_quality_profiles__","__WEBPACK_IMPORTED_MODULE_5__app_utils_addGlobalSuccessMessage__","__WEBPACK_IMPORTED_MODULE_6__app_utils_handleRequiredAuthorization__","__WEBPACK_IMPORTED_MODULE_7__helpers_l10n__","__extends","this","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","QualityProfiles","_super","_this","apply","arguments","state","loading","handleChangeProfile","oldKey","newKey","component","props","_a","allProfiles","profiles","newProfile","find","profile","key","isDefault","then","mounted","nextProfiles","filter","concat","setState","languageName","componentDidMount","checkPermissions","fetchProfiles","componentWillUnmount","configuration","showQualityProfiles","organization","Promise","all","r","project","render","className","a","title","onChangeProfile","1955","addGlobalSuccessMessage","message","__WEBPACK_IMPORTED_MODULE_0__getStore__","dispatch","__WEBPACK_IMPORTED_MODULE_1__store_globalMessages_duck__","2454","Header","__WEBPACK_IMPORTED_MODULE_1__helpers_l10n__","2455","Table","profilesByLanguage","__WEBPACK_IMPORTED_MODULE_1_lodash__","orderedProfiles","profileRows","map","__WEBPACK_IMPORTED_MODULE_2__ProfileRow__","language","possibleProfiles","__WEBPACK_IMPORTED_MODULE_3__helpers_l10n__","2456","__WEBPACK_IMPORTED_MODULE_1__components_controls_Select__","__WEBPACK_IMPORTED_MODULE_2__helpers_l10n__","ProfileRow","stopLoading","handleChange","option","renderProfileName","profileOption","label","renderProfileSelect","options","name","clearable","disabled","onChange","optionRenderer","style","width","valueRenderer","data-key"],"mappings":"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","file":"js/267.597ee000.chunk.js","sourcesContent":["webpackJsonp([267],{\n\n/***/ 1897:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_helmet__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_helmet___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react_helmet__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Header__ = __webpack_require__(2454);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Table__ = __webpack_require__(2455);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__api_quality_profiles__ = __webpack_require__(577);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__app_utils_addGlobalSuccessMessage__ = __webpack_require__(1955);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__app_utils_handleRequiredAuthorization__ = __webpack_require__(222);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__helpers_l10n__ = __webpack_require__(2);\nvar __extends = this && this.__extends || function () {\n    var extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n    } || function (d, b) {\n        for (var p in b) {\n            if (b.hasOwnProperty(p)) d[p] = b[p];\n        }\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\n/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\n\n\n\n\n\n\n\nvar QualityProfiles = /** @class */function (_super) {\n    __extends(QualityProfiles, _super);\n    function QualityProfiles() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = { loading: true };\n        _this.handleChangeProfile = function (oldKey, newKey) {\n            var component = _this.props.component;\n            var _a = _this.state,\n                allProfiles = _a.allProfiles,\n                profiles = _a.profiles;\n            var newProfile = allProfiles && allProfiles.find(function (profile) {\n                return profile.key === newKey;\n            });\n            var request = newProfile && newProfile.isDefault ? Object(__WEBPACK_IMPORTED_MODULE_4__api_quality_profiles__[\"i\" /* dissociateProject */])(oldKey, component.key) : Object(__WEBPACK_IMPORTED_MODULE_4__api_quality_profiles__[\"c\" /* associateProject */])(newKey, component.key);\n            return request.then(function () {\n                if (_this.mounted && profiles && newProfile) {\n                    // remove old profile, add new one\n                    var nextProfiles = profiles.filter(function (profile) {\n                        return profile.key !== oldKey;\n                    }).concat([newProfile]);\n                    _this.setState({ profiles: nextProfiles });\n                    Object(__WEBPACK_IMPORTED_MODULE_5__app_utils_addGlobalSuccessMessage__[\"a\" /* default */])(Object(__WEBPACK_IMPORTED_MODULE_7__helpers_l10n__[\"translateWithParameters\"])('project_quality_profile.successfully_updated', newProfile.languageName));\n                }\n            });\n        };\n        return _this;\n    }\n    QualityProfiles.prototype.componentDidMount = function () {\n        this.mounted = true;\n        if (this.checkPermissions()) {\n            this.fetchProfiles();\n        } else {\n            Object(__WEBPACK_IMPORTED_MODULE_6__app_utils_handleRequiredAuthorization__[\"default\"])();\n        }\n    };\n    QualityProfiles.prototype.componentWillUnmount = function () {\n        this.mounted = false;\n    };\n    QualityProfiles.prototype.checkPermissions = function () {\n        var configuration = this.props.component.configuration;\n        var hasPermission = configuration && configuration.showQualityProfiles;\n        return !!hasPermission;\n    };\n    QualityProfiles.prototype.fetchProfiles = function () {\n        var _this = this;\n        var _a = this.props.component,\n            key = _a.key,\n            organization = _a.organization;\n        Promise.all([Object(__WEBPACK_IMPORTED_MODULE_4__api_quality_profiles__[\"u\" /* searchQualityProfiles */])({ organization: organization }).then(function (r) {\n            return r.profiles;\n        }), Object(__WEBPACK_IMPORTED_MODULE_4__api_quality_profiles__[\"u\" /* searchQualityProfiles */])({ organization: organization, project: key }).then(function (r) {\n            return r.profiles;\n        })]).then(function (_a) {\n            var allProfiles = _a[0],\n                profiles = _a[1];\n            if (_this.mounted) {\n                _this.setState({ loading: false, allProfiles: allProfiles, profiles: profiles });\n            }\n        }, function () {\n            if (_this.mounted) {\n                _this.setState({ loading: false });\n            }\n        });\n    };\n    QualityProfiles.prototype.render = function () {\n        if (!this.checkPermissions()) {\n            return null;\n        }\n        var _a = this.state,\n            allProfiles = _a.allProfiles,\n            loading = _a.loading,\n            profiles = _a.profiles;\n        return __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"div\", { className: \"page page-limited\" }, __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](__WEBPACK_IMPORTED_MODULE_1_react_helmet___default.a, { title: Object(__WEBPACK_IMPORTED_MODULE_7__helpers_l10n__[\"translate\"])('project_quality_profiles.page') }), __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](__WEBPACK_IMPORTED_MODULE_2__Header__[\"a\" /* default */], null), loading ? __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"i\", { className: \"spinner\" }) : allProfiles && profiles && __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](__WEBPACK_IMPORTED_MODULE_3__Table__[\"a\" /* default */], { allProfiles: allProfiles, profiles: profiles, onChangeProfile: this.handleChangeProfile }));\n    };\n    return QualityProfiles;\n}(__WEBPACK_IMPORTED_MODULE_0_react__[\"PureComponent\"]);\n/* harmony default export */ __webpack_exports__[\"default\"] = (QualityProfiles);\n\n/***/ }),\n\n/***/ 1955:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = addGlobalSuccessMessage;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__getStore__ = __webpack_require__(69);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__store_globalMessages_duck__ = __webpack_require__(32);\n/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\n\nfunction addGlobalSuccessMessage(message) {\n  var store = Object(__WEBPACK_IMPORTED_MODULE_0__getStore__[\"default\"])();\n  store.dispatch(__WEBPACK_IMPORTED_MODULE_1__store_globalMessages_duck__[\"d\" /* addGlobalSuccessMessage */](message));\n}\n\n/***/ }),\n\n/***/ 2454:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = Header;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__helpers_l10n__ = __webpack_require__(2);\n/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\n\nfunction Header() {\n  return __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"header\", { className: \"page-header\" }, __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"h1\", { className: \"page-title\" }, Object(__WEBPACK_IMPORTED_MODULE_1__helpers_l10n__[\"translate\"])('project_quality_profiles.page')), __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"div\", { className: \"page-description\" }, Object(__WEBPACK_IMPORTED_MODULE_1__helpers_l10n__[\"translate\"])('project_quality_profiles.page.description')));\n}\n\n/***/ }),\n\n/***/ 2455:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = Table;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ProfileRow__ = __webpack_require__(2456);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__helpers_l10n__ = __webpack_require__(2);\n/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\n\n\n\nfunction Table(props) {\n    var profilesByLanguage = Object(__WEBPACK_IMPORTED_MODULE_1_lodash__[\"groupBy\"])(props.allProfiles, 'language');\n    var orderedProfiles = Object(__WEBPACK_IMPORTED_MODULE_1_lodash__[\"orderBy\"])(props.profiles, 'languageName');\n    // set key to language to avoid destroying of component\n    var profileRows = orderedProfiles.map(function (profile) {\n        return __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](__WEBPACK_IMPORTED_MODULE_2__ProfileRow__[\"a\" /* default */], { key: profile.language, profile: profile, possibleProfiles: profilesByLanguage[profile.language], onChangeProfile: props.onChangeProfile });\n    });\n    return __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"div\", { className: \"boxed-group boxed-group-inner\" }, __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"table\", { className: \"data zebra\" }, __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"thead\", null, __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"tr\", null, __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"th\", { className: \"thin nowrap\" }, Object(__WEBPACK_IMPORTED_MODULE_3__helpers_l10n__[\"translate\"])('language')), __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"th\", { className: \"thin nowrap\" }, Object(__WEBPACK_IMPORTED_MODULE_3__helpers_l10n__[\"translate\"])('quality_profile')), __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"th\", null, '\\xA0'))), __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"tbody\", null, profileRows)));\n}\n\n/***/ }),\n\n/***/ 2456:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_controls_Select__ = __webpack_require__(175);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__helpers_l10n__ = __webpack_require__(2);\nvar __extends = this && this.__extends || function () {\n    var extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n    } || function (d, b) {\n        for (var p in b) {\n            if (b.hasOwnProperty(p)) d[p] = b[p];\n        }\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\n/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\n\n\n\nvar ProfileRow = /** @class */function (_super) {\n    __extends(ProfileRow, _super);\n    function ProfileRow() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = { loading: false };\n        _this.stopLoading = function () {\n            if (_this.mounted) {\n                _this.setState({ loading: false });\n            }\n        };\n        _this.handleChange = function (option) {\n            if (_this.props.profile.key !== option.value) {\n                _this.setState({ loading: true });\n                _this.props.onChangeProfile(_this.props.profile.key, option.value).then(_this.stopLoading, _this.stopLoading);\n            }\n        };\n        _this.renderProfileName = function (profileOption) {\n            if (profileOption.isDefault) {\n                return __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"span\", null, __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"strong\", null, Object(__WEBPACK_IMPORTED_MODULE_2__helpers_l10n__[\"translate\"])('default')), ': ', profileOption.label);\n            }\n            return __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"span\", null, profileOption.label);\n        };\n        return _this;\n    }\n    ProfileRow.prototype.componentDidMount = function () {\n        this.mounted = true;\n    };\n    ProfileRow.prototype.componentWillUnmount = function () {\n        this.mounted = false;\n    };\n    ProfileRow.prototype.renderProfileSelect = function () {\n        var _a = this.props,\n            profile = _a.profile,\n            possibleProfiles = _a.possibleProfiles;\n        var options = possibleProfiles.map(function (profile) {\n            return {\n                value: profile.key,\n                label: profile.name,\n                isDefault: profile.isDefault\n            };\n        });\n        return __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](__WEBPACK_IMPORTED_MODULE_1__components_controls_Select__[\"c\" /* default */], { clearable: false, disabled: this.state.loading, onChange: this.handleChange, optionRenderer: this.renderProfileName, options: options, style: { width: 300 }, valueRenderer: this.renderProfileName, value: profile.key });\n    };\n    ProfileRow.prototype.render = function () {\n        var profile = this.props.profile;\n        return __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"tr\", { \"data-key\": profile.language }, __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"td\", { className: \"thin nowrap\" }, profile.languageName), __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"td\", { className: \"thin nowrap\" }, this.renderProfileSelect()), __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"td\", null, this.state.loading && __WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"](\"i\", { className: \"spinner\" })));\n    };\n    return ProfileRow;\n}(__WEBPACK_IMPORTED_MODULE_0_react__[\"PureComponent\"]);\n/* harmony default export */ __webpack_exports__[\"a\"] = (ProfileRow);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// js/267.597ee000.chunk.js","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Helmet from 'react-helmet';\nimport Header from './Header';\nimport Table from './Table';\nimport {\n  associateProject,\n  dissociateProject,\n  searchQualityProfiles,\n  Profile\n} from '../../api/quality-profiles';\nimport { Component } from '../../app/types';\nimport addGlobalSuccessMessage from '../../app/utils/addGlobalSuccessMessage';\nimport handleRequiredAuthorization from '../../app/utils/handleRequiredAuthorization';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\n\ninterface Props {\n  component: Component;\n}\n\ninterface State {\n  allProfiles?: Profile[];\n  loading: boolean;\n  profiles?: Profile[];\n}\n\nexport default class QualityProfiles extends React.PureComponent<Props, State> {\n  mounted: boolean;\n  state: State = { loading: true };\n\n  componentDidMount() {\n    this.mounted = true;\n    if (this.checkPermissions()) {\n      this.fetchProfiles();\n    } else {\n      handleRequiredAuthorization();\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  checkPermissions() {\n    const { configuration } = this.props.component;\n    const hasPermission = configuration && configuration.showQualityProfiles;\n    return !!hasPermission;\n  }\n\n  fetchProfiles() {\n    const { key, organization } = this.props.component;\n    Promise.all([\n      searchQualityProfiles({ organization }).then(r => r.profiles),\n      searchQualityProfiles({ organization, project: key }).then(r => r.profiles)\n    ]).then(\n      ([allProfiles, profiles]) => {\n        if (this.mounted) {\n          this.setState({ loading: false, allProfiles, profiles });\n        }\n      },\n      () => {\n        if (this.mounted) {\n          this.setState({ loading: false });\n        }\n      }\n    );\n  }\n\n  handleChangeProfile = (oldKey: string, newKey: string) => {\n    const { component } = this.props;\n    const { allProfiles, profiles } = this.state;\n    const newProfile = allProfiles && allProfiles.find(profile => profile.key === newKey);\n    const request =\n      newProfile && newProfile.isDefault\n        ? dissociateProject(oldKey, component.key)\n        : associateProject(newKey, component.key);\n\n    return request.then(() => {\n      if (this.mounted && profiles && newProfile) {\n        // remove old profile, add new one\n        const nextProfiles = [...profiles.filter(profile => profile.key !== oldKey), newProfile];\n        this.setState({ profiles: nextProfiles });\n\n        addGlobalSuccessMessage(\n          translateWithParameters(\n            'project_quality_profile.successfully_updated',\n            newProfile.languageName\n          )\n        );\n      }\n    });\n  };\n\n  render() {\n    if (!this.checkPermissions()) {\n      return null;\n    }\n\n    const { allProfiles, loading, profiles } = this.state;\n\n    return (\n      <div className=\"page page-limited\">\n        <Helmet title={translate('project_quality_profiles.page')} />\n\n        <Header />\n\n        {loading ? (\n          <i className=\"spinner\" />\n        ) : (\n          allProfiles &&\n          profiles && (\n            <Table\n              allProfiles={allProfiles}\n              profiles={profiles}\n              onChangeProfile={this.handleChangeProfile}\n            />\n          )\n        )}\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/js/apps/projectQualityProfiles/App.tsx","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport getStore from './getStore';\nimport * as globalMessages from '../../store/globalMessages/duck';\n\nexport default function addGlobalSuccessMessage(message: string): void {\n  const store = getStore();\n  store.dispatch(globalMessages.addGlobalSuccessMessage(message));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/js/app/utils/addGlobalSuccessMessage.ts","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\n\nexport default function Header() {\n  return (\n    <header className=\"page-header\">\n      <h1 className=\"page-title\">{translate('project_quality_profiles.page')}</h1>\n      <div className=\"page-description\">\n        {translate('project_quality_profiles.page.description')}\n      </div>\n    </header>\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/js/apps/projectQualityProfiles/Header.tsx","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { groupBy, orderBy } from 'lodash';\nimport ProfileRow from './ProfileRow';\nimport { Profile } from '../../api/quality-profiles';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  allProfiles: Profile[];\n  profiles: Profile[];\n  onChangeProfile: (oldProfile: string, newProfile: string) => Promise<void>;\n}\n\nexport default function Table(props: Props) {\n  const profilesByLanguage = groupBy(props.allProfiles, 'language');\n  const orderedProfiles = orderBy(props.profiles, 'languageName');\n\n  // set key to language to avoid destroying of component\n  const profileRows = orderedProfiles.map(profile => (\n    <ProfileRow\n      key={profile.language}\n      profile={profile}\n      possibleProfiles={profilesByLanguage[profile.language]}\n      onChangeProfile={props.onChangeProfile}\n    />\n  ));\n\n  return (\n    <div className=\"boxed-group boxed-group-inner\">\n      <table className=\"data zebra\">\n        <thead>\n          <tr>\n            <th className=\"thin nowrap\">{translate('language')}</th>\n            <th className=\"thin nowrap\">{translate('quality_profile')}</th>\n            {/* keep one empty cell for the spinner */}\n            <th>&nbsp;</th>\n          </tr>\n        </thead>\n        <tbody>{profileRows}</tbody>\n      </table>\n    </div>\n  );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/js/apps/projectQualityProfiles/Table.tsx","/*\n * SonarQube\n * Copyright (C) 2009-2018 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { Profile } from '../../api/quality-profiles';\nimport Select from '../../components/controls/Select';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  onChangeProfile: (oldProfile: string, newProfile: string) => Promise<void>;\n  possibleProfiles: Profile[];\n  profile: Profile;\n}\n\ninterface State {\n  loading: boolean;\n}\n\nexport default class ProfileRow extends React.PureComponent<Props, State> {\n  mounted: boolean;\n  state: State = { loading: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopLoading = () => {\n    if (this.mounted) {\n      this.setState({ loading: false });\n    }\n  };\n\n  handleChange = (option: { value: string }) => {\n    if (this.props.profile.key !== option.value) {\n      this.setState({ loading: true });\n      this.props\n        .onChangeProfile(this.props.profile.key, option.value)\n        .then(this.stopLoading, this.stopLoading);\n    }\n  };\n\n  renderProfileName = (profileOption: { isDefault: boolean; label: string }) => {\n    if (profileOption.isDefault) {\n      return (\n        <span>\n          <strong>{translate('default')}</strong>\n          {': '}\n          {profileOption.label}\n        </span>\n      );\n    }\n\n    return <span>{profileOption.label}</span>;\n  };\n\n  renderProfileSelect() {\n    const { profile, possibleProfiles } = this.props;\n\n    const options = possibleProfiles.map(profile => ({\n      value: profile.key,\n      label: profile.name,\n      isDefault: profile.isDefault\n    }));\n\n    return (\n      <Select\n        clearable={false}\n        disabled={this.state.loading}\n        onChange={this.handleChange}\n        optionRenderer={this.renderProfileName}\n        options={options}\n        style={{ width: 300 }}\n        valueRenderer={this.renderProfileName}\n        value={profile.key}\n      />\n    );\n  }\n\n  render() {\n    const { profile } = this.props;\n\n    return (\n      <tr data-key={profile.language}>\n        <td className=\"thin nowrap\">{profile.languageName}</td>\n        <td className=\"thin nowrap\">{this.renderProfileSelect()}</td>\n        <td>{this.state.loading && <i className=\"spinner\" />}</td>\n      </tr>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/js/apps/projectQualityProfiles/ProfileRow.tsx"],"sourceRoot":""}