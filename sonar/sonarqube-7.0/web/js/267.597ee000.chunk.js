webpackJsonp([267],{1897:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=(n.n(r),n(24)),a=n.n(o),i=n(2454),l=n(2455),s=n(577),c=n(1955),u=n(222),p=n(2),f=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={loading:!0},t.handleChangeProfile=function(e,n){var r=t.props.component,o=t.state,a=o.allProfiles,i=o.profiles,l=a&&a.find(function(e){return e.key===n});return(l&&l.isDefault?Object(s.i)(e,r.key):Object(s.c)(n,r.key)).then(function(){if(t.mounted&&i&&l){var n=i.filter(function(t){return t.key!==e}).concat([l]);t.setState({profiles:n}),Object(c.a)(Object(p.translateWithParameters)("project_quality_profile.successfully_updated",l.languageName))}})},t}return f(t,e),t.prototype.componentDidMount=function(){this.mounted=!0,this.checkPermissions()?this.fetchProfiles():Object(u.default)()},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.checkPermissions=function(){var e=this.props.component.configuration;return!(!e||!e.showQualityProfiles)},t.prototype.fetchProfiles=function(){var e=this,t=this.props.component,n=t.key,r=t.organization;Promise.all([Object(s.u)({organization:r}).then(function(e){return e.profiles}),Object(s.u)({organization:r,project:n}).then(function(e){return e.profiles})]).then(function(t){var n=t[0],r=t[1];e.mounted&&e.setState({loading:!1,allProfiles:n,profiles:r})},function(){e.mounted&&e.setState({loading:!1})})},t.prototype.render=function(){if(!this.checkPermissions())return null;var e=this.state,t=e.allProfiles,n=e.loading,o=e.profiles;return r.createElement("div",{className:"page page-limited"},r.createElement(a.a,{title:Object(p.translate)("project_quality_profiles.page")}),r.createElement(i.a,null),n?r.createElement("i",{className:"spinner"}):t&&o&&r.createElement(l.a,{allProfiles:t,profiles:o,onChangeProfile:this.handleChangeProfile}))},t}(r.PureComponent);t.default=m},1955:function(e,t,n){"use strict";function r(e){Object(o.default)().dispatch(a.d(e))}t.a=r;var o=n(69),a=n(32)},2454:function(e,t,n){"use strict";function r(){return o.createElement("header",{className:"page-header"},o.createElement("h1",{className:"page-title"},Object(a.translate)("project_quality_profiles.page")),o.createElement("div",{className:"page-description"},Object(a.translate)("project_quality_profiles.page.description")))}t.a=r;var o=n(0),a=(n.n(o),n(2))},2455:function(e,t,n){"use strict";function r(e){var t=Object(a.groupBy)(e.allProfiles,"language"),n=Object(a.orderBy)(e.profiles,"languageName"),r=n.map(function(n){return o.createElement(i.a,{key:n.language,profile:n,possibleProfiles:t[n.language],onChangeProfile:e.onChangeProfile})});return o.createElement("div",{className:"boxed-group boxed-group-inner"},o.createElement("table",{className:"data zebra"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",{className:"thin nowrap"},Object(l.translate)("language")),o.createElement("th",{className:"thin nowrap"},Object(l.translate)("quality_profile")),o.createElement("th",null,"Â "))),o.createElement("tbody",null,r)))}t.a=r;var o=n(0),a=(n.n(o),n(5)),i=(n.n(a),n(2456)),l=n(2)},2456:function(e,t,n){"use strict";var r=n(0),o=(n.n(r),n(175)),a=n(2),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={loading:!1},t.stopLoading=function(){t.mounted&&t.setState({loading:!1})},t.handleChange=function(e){t.props.profile.key!==e.value&&(t.setState({loading:!0}),t.props.onChangeProfile(t.props.profile.key,e.value).then(t.stopLoading,t.stopLoading))},t.renderProfileName=function(e){return e.isDefault?r.createElement("span",null,r.createElement("strong",null,Object(a.translate)("default")),": ",e.label):r.createElement("span",null,e.label)},t}return i(t,e),t.prototype.componentDidMount=function(){this.mounted=!0},t.prototype.componentWillUnmount=function(){this.mounted=!1},t.prototype.renderProfileSelect=function(){var e=this.props,t=e.profile,n=e.possibleProfiles,a=n.map(function(e){return{value:e.key,label:e.name,isDefault:e.isDefault}});return r.createElement(o.c,{clearable:!1,disabled:this.state.loading,onChange:this.handleChange,optionRenderer:this.renderProfileName,options:a,style:{width:300},valueRenderer:this.renderProfileName,value:t.key})},t.prototype.render=function(){var e=this.props.profile;return r.createElement("tr",{"data-key":e.language},r.createElement("td",{className:"thin nowrap"},e.languageName),r.createElement("td",{className:"thin nowrap"},this.renderProfileSelect()),r.createElement("td",null,this.state.loading&&r.createElement("i",{className:"spinner"})))},t}(r.PureComponent);t.a=l}});
//# sourceMappingURL=267.597ee000.chunk.js.map